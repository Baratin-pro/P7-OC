<mat-spinner *ngIf="loading"></mat-spinner>
<section *ngIf="!loading">
  <h2 class="publicationList_title">Liste des publications de Groupomania</h2> 
    <a mat-icon-button class="publicationList_edit" routerLink="../editPublication" aria-label="button création d'une publication">
    <mat-icon class="publicationList_edit_icon">post_add</mat-icon>
    <span class="publicationList_edit_text">Créer publication</span> 
  </a>
  <mat-card class="publicationList_card"  *ngFor="let publication of publications">
    <mat-card-header class="publicationList_card_header" (click)="onClickPublication(publication.idPublications)">
      <div mat-card-avatar class="publicationList_card_header_img" style="background-image: url({{publication.user.image}});"></div>
      <mat-card-title class="publicationList_card_header_title">{{publication.user.names}} {{publication.user.firstnames}} </mat-card-title>
      <mat-card-subtitle> Publié à {{publication.publicationsDate | date:' HH:mm le dd/MM/YY '}} </mat-card-subtitle>
    </mat-card-header>
      <img  class="publicationList_card_img" 
          mat-card-image [src]="publication.imagesUrl" 
          alt="Image postée concernant {{publication.titles}}" 
          (click)="onClickPublication(publication.idPublications)"> 
    <mat-card-content class="publicationList_card_content">
      <h3 class="publicationList_card_content_title">{{publication.titles}}</h3>
      <p *ngIf="this.onDescriptionlength(publication.descriptions)" class="publicationList_card_content_description">{{this.onDescriptionlength(publication.descriptions)}}</p>
    </mat-card-content>
    <mat-card-actions class="publicationList_card_emoji">
      <button mat-button
              matBadge="{{publication.likes}}"
              matBadgePosition="after"
              matBadgeOverlap="false"
              (click)="onLiked(publication.idPublications)"> 
        <mat-icon class="publicationList_card_emoji_icon publicationList_card_emoji_icon--thumb">thumb_up</mat-icon>
      </button>

      <button mat-button 
              matBadge="{{publication.dislikes}}"
              matBadgePosition="after"
              matBadgeOverlap="false"
              (click)="onDisliked(publication.idPublications)">
        <mat-icon class="publicationList_card_emoji_icon publicationList_card_emoji_icon--thumb">thumb_down</mat-icon>
      </button>


      <div    class="publicationList_card_emoji_comment"
              mat-button 
              matBadge="{{publication.commentCount}}" 
              matBadgePosition="after"
              matBadgeOverlap="false">
          <mat-icon class="publicationList_card_emoji_icon">comment</mat-icon>
      </div>
    </mat-card-actions>
    <mat-card-content class="commentList_card" *ngFor="let comment of publication.comment">
      <mat-card-header  class="commentList_card_container"> 
        <div mat-card-avatar class="commentList_card_container_img" style="background-image: url({{comment.user.image}});"></div>
        <div class="commentList_card_container_description">
          <mat-card-title class="commentList_card_container_description_title">{{comment.user.names}} {{comment.user.firstnames}}</mat-card-title>
          <div class="commentList_card_container_description_content" >{{comment.comments}}</div>
        </div>
      </mat-card-header>
    </mat-card-content>
  </mat-card>

  
</section>

